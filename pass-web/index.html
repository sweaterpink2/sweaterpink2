<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sweater Pink Premium (Encrypted)</title>

<style>
  :root { --pink:#ffc0cb; --accent:#ff4d94; --green:#28a745; }

  body{
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    background:#fff0f5;margin:0;padding:20px;
  }

  #password-box{
    background:var(--pink);padding:20px;border-radius:12px;text-align:center;
    width:90%;max-width:420px;margin:20px auto;
    box-shadow:0 6px 14px rgba(0,0,0,0.12);
  }

  #quote-box{
    display:none;background:var(--pink);color:#333;font-size:18px;margin:20px auto;
    text-align:center;padding:20px;border-radius:12px;width:90%;max-width:560px;
    box-shadow:0 6px 14px rgba(0,0,0,0.12);opacity:0;transition:opacity .8s ease-in;
    overflow-wrap:anywhere;
  }

  .btn{
    background:var(--accent);color:#fff;border:none;padding:10px 18px;
    border-radius:8px;cursor:pointer;font-weight:600;
  }
  .btn-green{background:var(--green)}

  .input-wrap{
    position:relative;width:82%;margin:0 auto 12px;
  }

  input[type=password],input[type=text]{
    padding:10px 38px 10px 12px;background:#fff;border:none;border-radius:8px;
    width:100%;box-sizing:border-box;color:#000;outline:none;
  }

  .eye{
    position:absolute;right:8px;top:50%;transform:translateY(-50%);
    cursor:pointer;font-size:16px;color:#555;background:transparent;border:none;
  }

  #error-msg{
    color:#b00020;font-weight:bold;display:none;margin-top:12px;
  }
</style>
</head>

<body>

<!-- ========== PASSWORD INPUT ========== -->
<div id="password-box">
  <p style="color:#000;margin:0 0 12px;font-size:18px;">
    <b>Masukkan Password di video terbaru<br>(salam: sweater pink)</b>
  </p>

  <div class="input-wrap">
    <input type="password" id="password-input" placeholder="Password..."
           onkeydown="if(event.key==='Enter'){checkPassword();}">
    <button type="button" class="eye" onclick="togglePassword()" aria-label="Lihat Password">üëÅÔ∏è</button>
  </div>

  <button class="btn" onclick="checkPassword()">Submit</button>
  <p id="error-msg"></p>
</div>

<!-- ========== OUTPUT AFTER DECRYPT ========== -->
<div id="quote-box"></div>

<!-- Memuat hasil enkripsi dari GitHub Actions -->
<script src="ciphers.js?v=4"></script>


<script>
/* ============================
   AES-GCM DECRYPT + PBKDF2
   ============================ */
const CIPHERS = (window.CIPHERS || []);

function b64toBytes(b64){
  const bin=atob(b64);
  const arr=new Uint8Array(bin.length);
  for(let i=0;i<bin.length;i++)arr[i]=bin.charCodeAt(i);
  return arr;
}

async function deriveKey(password, salt, iters){
  const enc = new TextEncoder();
  const keyMaterial = await crypto.subtle.importKey("raw", enc.encode(password), "PBKDF2", false, ["deriveKey"]);
  return crypto.subtle.deriveKey(
    { name:"PBKDF2", salt, iterations: iters || 100000, hash:"SHA-256" },
    keyMaterial,
    { name:"AES-GCM", length:256 },
    false,
    ["decrypt"]
  );
}

async function tryDecryptWith(password){
  for(const item of CIPHERS){
    try{
      const salt = b64toBytes(item.salt_b64);
      const iv   = b64toBytes(item.iv_b64);
      const key  = await deriveKey(password, salt, item.iters);
      const ct   = b64toBytes(item.data_b64);
      const plainBuf = await crypto.subtle.decrypt({name:"AES-GCM", iv}, key, ct);
      return JSON.parse(new TextDecoder().decode(new Uint8Array(plainBuf)));
    }catch(e){}
  }
  throw new Error("wrong_password_or_blob");
}

/* ============================
   PASSWORD UI
   ============================ */
function togglePassword(){
  const input = document.getElementById("password-input");
  input.type = input.type === "password" ? "text" : "password";
}

async function checkPassword(){
  const val = document.getElementById("password-input").value.trim();
  const err = document.getElementById("error-msg");

  if(!val){
    err.textContent = "Password tidak boleh kosong.";
    err.style.display = "block";
    return;
  }

  try{
    const data = await tryDecryptWith(val);
    document.getElementById("password-box").style.display = "none";
    renderQuote(data);
  }catch(e){
    const url = "http://youtube.com/@sweaterpink2";
    err.innerHTML =
      'Password salah!!! cek video terbaru di sini ' +
      '<a href="'+url+'" target="_blank" style="text-decoration:underline;color:#0b5ed7;">link</a>.';
    err.style.display = "block";
  }
}

/* ============================
   RENDER KONTEN (USERNAME/PASS)
   ============================ */
function renderQuote({quotes, perhatianText, perhatianLink, downloadLink, groupLink}){
  const now = new Date();
  const day = now.getDate();
  const monthNames = ["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];
  const dateStr = `${day} ${monthNames[now.getMonth()]} ${now.getFullYear()}`;

  const raw = quotes[Math.min(day,31)-1] || "";
  const clean = raw.replace(/^\d{1,2}:\s*/, "");
  const [username, password] = clean.split(":");

  const box = document.getElementById("quote-box");
  box.innerHTML = `
    <div style="font-size:22px;font-weight:bold;margin-bottom:15px;">
      ${dateStr}
    </div>

    <div style="background:#fff3cd;color:#856404;border:1px solid #ffeeba;padding:12px;
                border-radius:10px;margin:0 auto 16px;max-width:480px;text-align:center;">
      <b style="display:block;margin-bottom:6px;">‚ö†Ô∏è Perhatian!!!</b>
      <span style="display:block;line-height:1.5;margin-bottom:8px;">${perhatianText}</span>
      <a href="${perhatianLink}" target="_blank" 
         style="color:#d63384;font-weight:bold;text-decoration:underline;">üîó Panduan username:password</a>
    </div>

    <div style="text-align:center;font-size:22px;margin-top:20px;margin-bottom:10px;">
      <b>Username:</b><br>
      <span id="username-val" style="font-size:20px;">${username}</span><br><br>
      <b>Password:</b><br>
      <span id="password-val" style="font-size:20px;">${password}</span>
    </div>

    <div style="margin-top:22px;display:flex;flex-direction:column;align-items:center;gap:12px;">
      <button class="btn" onclick="copyUser()">Salin Username</button>
      <button class="btn" onclick="copyPass()">Salin Password</button>
      <p id="copy-msg" style="color:green;font-weight:bold;display:none;margin:0;">
        ‚úî berhasil disalin!
      </p>
      <a href="${downloadLink}" target="_blank" class="btn">‚¨á Download Config</a>
      <a href="${groupLink}" target="_blank" class="btn btn-green">üë• Join Grup Komunitas</a>
    </div>
  `;

  box.style.display = "block";
  requestAnimationFrame(()=> box.style.opacity = 1);
}

/* ============================
   COPY TEXT + AUTO-HIDE NOTIF
   ============================ */
function showCopy(){
  const msg = document.getElementById("copy-msg");
  msg.style.display = "block";

  clearTimeout(window._copyTimer);
  window._copyTimer = setTimeout(() => {
    msg.style.display = "none";
  }, 1800);
}

function copyUser(){
  navigator.clipboard.writeText(
    document.getElementById("username-val").innerText
  ).then(showCopy);
}

function copyPass(){
  navigator.clipboard.writeText(
    document.getElementById("password-val").innerText
  ).then(showCopy);
}
</script>

</body>
</html>

<!-- üå∏ Marquee Section -->
<style>
  .marquee-box {
    background: linear-gradient(135deg, #ff4ac9, #ff74d9, #a259ff, #6ecbff);
    color:white;padding:8px 12px;font-size:12px;font-weight:600;
    border-radius:25px;margin:15px auto 25px;
    box-shadow:0 6px 20px rgba(255,74,201,.25);
    max-width:95%;text-align:center;
  }
</style>

<div class="marquee-box">
  <marquee>‚úÖ Ready Config Premium ‚Ä¢ Aktif 30‚Äì60 Hari ‚Ä¢ Dipercaya 1.890 Pelanggan ‚Ä¢ Respon Cepat! ‚úÖ</marquee>
</div>
